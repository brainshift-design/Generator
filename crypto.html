<html>
    <script src="core/lib.js"></script>
    <script src="core/math.js"></script>
    <script src="core/util.js"></script>
    <script src="core/random.js"></script>
    <script src="core/base32.js"></script>
    <script src="core/base64.js"></script>
    <script src="core/common.js"></script>
    <script src="core/bigmath.js"></script>
    <script src="license/crypto.js"></script>
    <script src="license/license.js"></script>


    <body>
        <p id='text'></p>
    </body>

    <style>
        #text
        {
            font:          11pt Consolas;
            overflow-wrap: break-word;
            word-break:    break-all;
            line-height:   1.5em;
        }
    </style>

    <script>

        let txt = '';


        const id   = getQueryVariable('id');
        const date = getQueryVariable('date'); // DDMMYYYY

        const lic  = createLicense(id, date);
        const key  = createProductKey(lic);

        if (   id   != 'false'
            && date != 'false')
            txt += key;

        // const lic = createLicense('673258279043070641', '27022023');
        // const str = createLicenseString(lic);

        const userId  = '673258279043070642';

        const goodKey = key; //createProductKey(str);
        const badKey  = goodKey.substring(0, goodKey.length-1) + 'E';

        txt += '<br/>';
        txt += 'validating ' + goodKey + ' ' + (validateLicense(userId, goodKey) ? '√' : 'X') + '<br/>';
        txt += 'validating ' +  badKey + ' ' + (validateLicense(userId, badKey ) ? '√' : 'X');


        text.innerHTML = txt;

    </script>

</html>