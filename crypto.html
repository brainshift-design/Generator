<html>
    <script src="core/lib.js"></script>
    <script src="core/math.js"></script>
    <script src="core/base64.js"></script>
    <script src="core/bigmath.js"></script>
    <script src="core/crypto.js"></script>

    <body>
        <p id='text'></p>
    </body>

    <style>
        #text 
        {
             font:          11pt Consolas; 
             overflow-wrap: break-word;
             word-break:    break-all;
        }
    </style>

    <script>
        var txt = '';
        
        var str = 'This a plain text message.';

        var data = bytesFromString(str);

        txt += 'str: '  + str  + '<br/><br/>';

        txt += '-------------------------------------------------------------<br/><br/>';
        
        txt += 'crypto: ' + cryptoModulusSize + ' bits<br/><br/>'
        
        var keys = createCryptoKeys();
        
        txt += 'p: ' + keys.private.p + '<br/><br/>';
        txt += 'q: ' + keys.private.q + '<br/><br/>';
        
        txt += '-------------------------------------------------------------<br/><br/>';

        txt += 'public key:<br/><br/>';
        
        txt += 'e: ' + keys.public.e + '<br/>';
        txt += 'n: ' + keys.public.n + '<br/><br/>';
        
        txt += '-------------------------------------------------------------<br/><br/>';
        
        txt += 'private key:<br/><br/>';
        
        txt += 'd: ' + keys.private.d + '<br/><br/>';
        
        txt += '-------------------------------------------------------------<br/><br/>';
        
        var enc = arrayToBase64(encrypt(data, keys.public));
        txt += 'enc: ' + enc + '<br/><br/>';
        txt += '-------------------------------------------------------------<br/><br/>';

        var dec = decrypt(base64toArray(enc), keys.private);
        txt += 'dec: ' + stringFromBytes(dec) + '<br/><br/>';

        text.innerHTML = txt;
    </script>

</html>