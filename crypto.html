<html>
    <script src="core/lib.js"></script>
    <script src="core/math.js"></script>
    <script src="core/util.js"></script>
    <script src="core/random.js"></script>
    <script src="core/base32.js"></script>
    <script src="core/base64.js"></script>
    <script src="core/bigmath.js"></script>
    <script src="core/crypto.js"></script>
    <script src="license/license.js"></script>
    

    <body>
        <p id='text'></p>
    </body>

    <style>
        #text 
        {
            font:          11pt Consolas; 
            overflow-wrap: break-word;
            word-break:    break-all;
            line-height:   1.5em;
        }
    </style>

    <script>
        
        var txt = '';


        var name = getQueryVariable('name');

        if (name != 'false')
            txt += createProductKey(name);

        else
        {
            var rnd = new Random(1234567);    

            const firstNames = ['FirstName1', 'FirstName2'];
            const  lastNames = ['LastName1', 'LastName2'];


            const names = [];

            for (var i = 0; i < 30; i++)
            {
                const name =
                      firstNames[Math.floor(rnd.next() * firstNames.length)] + ' '
                    +  lastNames[Math.floor(rnd.next() *  lastNames.length)];  

                names.push(name);    
            }    


            var maxLen = 
                  Math.max(...(firstNames.map(n => n.length))) + 1 
                + Math.max(...( lastNames.map(n => n.length)));  
            
        
            for (var i = 0; i < names.length; i++)
            {
                const name = names[i];
                const key  = createProductKey(name);
                
                txt += 
                    name.padEnd(maxLen).replace(/ /g, '&nbsp;')
                    + ' ' + key 
                    + '&nbsp;&nbsp;&nbsp;' + (validateProductKey(name, key) ? '√' : 'X')
                    + '<br/>';
            }


            var testName = '673258279043070642';
            var goodKey  = 'R3HQX34MSNXNA';
            var badKey   = 'R3HQX34MSNXNB';

            txt += '<br/>';
            txt += 'validating ' + testName + ' ' + goodKey + ' ' + (validateProductKey(testName, goodKey) ? '√' : 'X') + '<br/>';
            txt += 'validating ' + testName + ' ' +  badKey + ' ' + (validateProductKey(testName, badKey ) ? '√' : 'X');
        }


        text.innerHTML = txt;

    </script>

</html>