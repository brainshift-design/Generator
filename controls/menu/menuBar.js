var menuMain;
var menuMainPreferences;
var menuMainDebug;
var menuMainDebugLogging;
var menuMainHelp;

var menuNumber;
var menuString;
var menuColor;
var menuShape;

var menuZoom;



const iconGenerator        = '<svg width="19" height="10" viewBox="0 0 19 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.7074 3.74745C11.6364 3.51733 11.5384 3.31137 11.4134 3.12955C11.2912 2.94489 11.1435 2.78722 10.9702 2.65654C10.7997 2.52586 10.6037 2.42784 10.3821 2.3625C10.1605 2.29432 9.91903 2.26023 9.65767 2.26023C9.18892 2.26023 8.77131 2.37813 8.40483 2.61392C8.03835 2.84972 7.75 3.19631 7.53977 3.6537C7.33239 4.10824 7.22869 4.66222 7.22869 5.31563C7.22869 5.97472 7.33239 6.53296 7.53977 6.99034C7.74716 7.44773 8.03551 7.79574 8.40483 8.03438C8.77415 8.27017 9.20313 8.38807 9.69176 8.38807C10.1349 8.38807 10.5185 8.30284 10.8423 8.13239C11.169 7.96194 11.4205 7.72046 11.5966 7.40796C11.7727 7.09262 11.8608 6.7233 11.8608 6.3L12.2188 6.3554H9.84943V5.11961H13.3906V6.1679C13.3906 6.91506 13.2315 7.56137 12.9134 8.10682C12.5952 8.65228 12.1577 9.07273 11.6009 9.36819C11.044 9.6608 10.4048 9.80711 9.68324 9.80711C8.87926 9.80711 8.1733 9.62671 7.56534 9.26591C6.96023 8.90228 6.48722 8.38665 6.14631 7.71904C5.80824 7.04858 5.6392 6.25313 5.6392 5.33267C5.6392 4.62813 5.73864 3.99887 5.9375 3.44489C6.1392 2.89091 6.42045 2.42074 6.78125 2.03438C7.14205 1.64517 7.56534 1.34972 8.05114 1.14802C8.53693 0.94347 9.06534 0.841197 9.63636 0.841197C10.1193 0.841197 10.5696 0.91222 10.9872 1.05427C11.4048 1.19347 11.7756 1.39233 12.0994 1.65086C12.4261 1.90938 12.6946 2.2162 12.9048 2.57131C13.1151 2.92642 13.2528 3.31847 13.3182 3.74745H11.7074Z" fill="white"/><circle cx="2" cy="5" r="1.5" stroke="white"/><circle cx="17" cy="5" r="2" fill="white"/></svg>';

const iconNumber           = '<svg width="18" height="9" viewBox="0 0 18 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.13849 0.145454V8H2.18736V1.14261H2.14134L0.223721 2.41591V1.44943L2.18736 0.145454H3.13849ZM5.39744 8V7.30966L7.99006 4.47159C8.29432 4.1392 8.54489 3.85028 8.74176 3.60483C8.93864 3.35682 9.08438 3.12415 9.17898 2.90682C9.27614 2.68693 9.32472 2.45682 9.32472 2.21648C9.32472 1.94034 9.25824 1.70128 9.12528 1.49929C8.99489 1.2973 8.81591 1.14133 8.58835 1.03139C8.3608 0.921449 8.10511 0.866477 7.82131 0.866477C7.5196 0.866477 7.25625 0.929119 7.03125 1.0544C6.80881 1.17713 6.63622 1.34972 6.51349 1.57216C6.39332 1.7946 6.33324 2.0554 6.33324 2.35454H5.42812C5.42812 1.89432 5.53423 1.49034 5.74645 1.14261C5.95866 0.794886 6.24759 0.523863 6.61321 0.329545C6.98139 0.135227 7.39432 0.0380677 7.85199 0.0380677C8.31222 0.0380677 8.72003 0.135227 9.07543 0.329545C9.43082 0.523863 9.70952 0.785937 9.91151 1.11577C10.1135 1.4456 10.2145 1.8125 10.2145 2.21648C10.2145 2.5054 10.1621 2.78793 10.0572 3.06406C9.95497 3.33764 9.77599 3.64318 9.52031 3.98068C9.26719 4.31562 8.91562 4.72472 8.46562 5.20795L6.70142 7.09489V7.15625H10.3526V8H5.39744ZM14.5905 8.10739C14.0842 8.10739 13.633 8.02045 13.2366 7.84659C12.8429 7.67273 12.5297 7.43111 12.297 7.12173C12.0669 6.8098 11.9416 6.44801 11.9212 6.03636H12.8876C12.9081 6.28949 12.995 6.5081 13.1484 6.69219C13.3018 6.87372 13.5026 7.01435 13.7506 7.11406C13.9986 7.21378 14.2734 7.26364 14.5751 7.26364C14.9126 7.26364 15.2118 7.20483 15.4726 7.08722C15.7334 6.9696 15.9379 6.80597 16.0862 6.59631C16.2345 6.38665 16.3087 6.14375 16.3087 5.86761C16.3087 5.57869 16.2371 5.32429 16.0939 5.1044C15.9507 4.88196 15.7411 4.7081 15.4649 4.58281C15.1888 4.45753 14.8513 4.39489 14.4524 4.39489H13.8234V3.55114H14.4524C14.7643 3.55114 15.0379 3.49489 15.2732 3.38239C15.5109 3.26989 15.6963 3.11136 15.8293 2.90682C15.9648 2.70227 16.0325 2.46193 16.0325 2.18579C16.0325 1.91989 15.9737 1.68849 15.8561 1.49162C15.7385 1.29474 15.5723 1.14133 15.3575 1.03139C15.1453 0.921449 14.8947 0.866477 14.6058 0.866477C14.3348 0.866477 14.0791 0.916335 13.8388 1.01605C13.601 1.11321 13.4067 1.25511 13.2558 1.44176C13.105 1.62585 13.0232 1.8483 13.0104 2.10909H12.0899C12.1053 1.69744 12.2293 1.33693 12.4619 1.02756C12.6946 0.715624 12.9989 0.472727 13.3747 0.298863C13.7531 0.125 14.1686 0.0380677 14.6212 0.0380677C15.107 0.0380677 15.5237 0.136505 15.8714 0.33338C16.2192 0.527698 16.4864 0.784659 16.673 1.10426C16.8597 1.42386 16.953 1.76903 16.953 2.13977C16.953 2.5821 16.8366 2.95923 16.604 3.27116C16.3739 3.5831 16.0607 3.79915 15.6643 3.91932V3.98068C16.1604 4.0625 16.5477 4.27344 16.8264 4.61349C17.1051 4.95099 17.2445 5.36903 17.2445 5.86761C17.2445 6.2946 17.1281 6.67812 16.8955 7.01818C16.6653 7.35568 16.3509 7.62159 15.952 7.81591C15.5531 8.01023 15.0993 8.10739 14.5905 8.10739Z" fill="white"/></svg>';
const iconLimits           = '<svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.409098 0.529134H1.34461L3.54433 5.902H3.62018L5.81989 0.529134H6.7554V7.00186H6.02217V2.08411H5.95896L3.93623 7.00186H3.22827L1.20555 2.08411H1.14234V7.00186H0.409098V0.529134ZM8.59245 7.00186H7.77072L10.1474 0.529134H10.9565L13.3332 7.00186H12.5115L10.5773 1.55314H10.5267L8.59245 7.00186ZM8.89586 4.47345H12.2081V5.16876H8.89586V4.47345ZM14.7207 0.529134L16.3894 3.22189H16.44L18.1088 0.529134H19.0316L16.9963 3.7655L19.0316 7.00186H18.1088L16.44 4.35967H16.3894L14.7207 7.00186H13.7978L15.8838 3.7655L13.7978 0.529134H14.7207Z" fill="white"/><path d="M2.50133 8.89277H3.38429L5.46042 13.9638H5.53201L7.60815 8.89277H8.4911V15.0019H7.79906V10.3604H7.7394L5.83031 15.0019H5.16213L3.25304 10.3604H3.19338V15.0019H2.50133V8.89277ZM10.7142 8.89277V15.0019H9.97438V8.89277H10.7142ZM17.0417 8.89277V15.0019H16.3258L12.9969 10.2053H12.9372V15.0019H12.1974V8.89277H12.9133L16.2542 13.7013H16.3139V8.89277H17.0417Z" fill="white"/></svg>';
const iconMath             = '<svg width="17" height="19" viewBox="0 0 17 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.138 6.57967V0.485922H13.1039V6.57967H14.138ZM16.6678 4.04984V3.01575H10.5741V4.04984H16.6678Z" fill="white"/><path d="M11.3681 15.5004L16.5755 10.293L15.8738 9.59129L10.6664 14.7987L11.3681 15.5004ZM15.8738 15.5004L16.5755 14.7987L11.3681 9.59129L10.6664 10.293L15.8738 15.5004Z" fill="white"/><path d="M0.576652 12.0288V13.0629H6.48574V12.0288H0.576652ZM3.5312 15.7589C3.76202 15.7589 3.95899 15.6789 4.12211 15.5188C4.28214 15.3557 4.36216 15.1588 4.36216 14.9279C4.36216 14.7063 4.28214 14.5155 4.12211 14.3555C3.95899 14.1955 3.76202 14.1154 3.5312 14.1154C3.30961 14.1154 3.11879 14.1955 2.95875 14.3555C2.79872 14.5155 2.7187 14.7063 2.7187 14.9279C2.7187 15.1588 2.79872 15.3557 2.95875 15.5188C3.11879 15.6789 3.30961 15.7589 3.5312 15.7589ZM3.5312 10.9762C3.68508 10.9762 3.82511 10.9393 3.9513 10.8654C4.07748 10.7916 4.1775 10.6915 4.25137 10.5654C4.32523 10.4392 4.36216 10.2991 4.36216 10.1453C4.36216 9.92367 4.28214 9.73286 4.12211 9.57282C3.95899 9.41278 3.76202 9.33276 3.5312 9.33276C3.30961 9.33276 3.11879 9.41278 2.95875 9.57282C2.79872 9.73286 2.7187 9.92367 2.7187 10.1453C2.7187 10.3761 2.79872 10.5731 2.95875 10.7362C3.11879 10.8962 3.30961 10.9762 3.5312 10.9762Z" fill="white"/><path d="M0.576652 3.01575V4.04984H6.48574V3.01575H0.576652Z" fill="white"/></svg>';
const iconAdd              = '<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.78932 10.1318V0.756822H6.38023V10.1318H4.78932ZM0.897271 6.23978V4.64887H10.2723V6.23978H0.897271Z" fill="white"/></svg>';
const iconSubtract         = '<svg width="10" height="4" viewBox="0 0 10 4" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.13023 0.648867V2.23978H0.0393206V0.648867H9.13023Z" fill="white"/></svg>';
const iconMultiply         = '<svg width="10" height="12" viewBox="0 0 10 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.05068 9.98978L0.0393206 1.97841L1.11887 0.898868L9.13023 8.91023L8.05068 9.98978ZM1.11887 9.98978L0.0393206 8.91023L8.05068 0.898868L9.13023 1.97841L1.11887 9.98978Z" fill="white"/></svg>';
const iconDivide           = '<svg width="10" height="12" viewBox="0 0 10 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.13023 4.64887V6.23978H0.0393206V4.64887H9.13023ZM4.58478 10.3875C4.22966 10.3875 3.92663 10.2644 3.67568 10.0182C3.42947 9.76724 3.30637 9.46421 3.30637 9.1091C3.30637 8.76819 3.42947 8.47463 3.67568 8.22841C3.92663 7.9822 4.22966 7.85909 4.58478 7.85909C4.92568 7.85909 5.21925 7.9822 5.46546 8.22841C5.71167 8.47463 5.83478 8.76819 5.83478 9.1091C5.83478 9.46421 5.71167 9.76724 5.46546 10.0182C5.21925 10.2644 4.92568 10.3875 4.58478 10.3875ZM4.58478 3.02955C4.34803 3.02955 4.1326 2.97273 3.93847 2.85909C3.74434 2.74546 3.59046 2.59158 3.47682 2.39745C3.36318 2.20332 3.30637 1.98788 3.30637 1.75114C3.30637 1.41023 3.42947 1.11667 3.67568 0.870458C3.92663 0.624246 4.22966 0.501141 4.58478 0.501141C4.92568 0.501141 5.21925 0.624246 5.46546 0.870458C5.71167 1.11667 5.83478 1.41023 5.83478 1.75114C5.83478 2.10625 5.71167 2.40928 5.46546 2.66023C5.21925 2.90644 4.92568 3.02955 4.58478 3.02955Z" fill="white"/></svg>';
const iconExponent         = '<svg width="15" height="16" viewBox="-1 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.58665 4.77273L3.67756 8.34091L5.76847 4.77273H7.31392L4.49574 9.13636L7.31392 13.5H5.76847L3.67756 10.1136L1.58665 13.5H0.0411932L2.81392 9.13636L0.0411932 4.77273H1.58665Z" fill="white"/><path d="M9.30682 8.04545C9.16477 8.04545 9.03812 8.03362 8.92685 8.00994C8.81558 7.98864 8.73864 7.96733 8.69602 7.94602L8.90909 7.20739C9.11269 7.25947 9.29261 7.27841 9.44886 7.2642C9.60511 7.25 9.74361 7.18016 9.86435 7.05469C9.98745 6.93158 10.0999 6.73153 10.2017 6.45455L10.358 6.02841L8.34091 0.545454H9.25L10.7557 4.89205H10.8125L12.3182 0.545454H13.2273L10.9119 6.79545C10.8078 7.07718 10.6787 7.31037 10.5249 7.49503C10.371 7.68205 10.1922 7.82055 9.98864 7.91051C9.78741 8.00047 9.56013 8.04545 9.30682 8.04545Z" fill="white"/></svg>';
const iconModulo           = '<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.07556 8.75853V8.21776C6.07556 7.8439 6.15233 7.50175 6.30588 7.19131C6.46277 6.87753 6.68976 6.62718 6.98685 6.44024C7.28728 6.24997 7.65113 6.15484 8.0784 6.15484C8.51235 6.15484 8.8762 6.24997 9.16995 6.44024C9.4637 6.62718 9.68568 6.87753 9.83589 7.19131C9.9861 7.50175 10.0612 7.8439 10.0612 8.21776V8.75853C10.0612 9.1324 9.98444 9.47622 9.83088 9.78999C9.68067 10.1004 9.45702 10.3508 9.15993 10.5411C8.86618 10.728 8.50567 10.8215 8.0784 10.8215C7.64445 10.8215 7.27893 10.728 6.98184 10.5411C6.68475 10.3508 6.45943 10.1004 6.30588 9.78999C6.15233 9.47622 6.07556 9.1324 6.07556 8.75853ZM7.09701 8.21776V8.75853C7.09701 9.06897 7.17044 9.3477 7.31732 9.59472C7.46419 9.8384 7.71789 9.96024 8.0784 9.96024C8.4289 9.96024 8.67591 9.8384 8.81945 9.59472C8.96632 9.3477 9.03976 9.06897 9.03976 8.75853V8.21776C9.03976 7.90732 8.96966 7.63026 8.82946 7.38659C8.68926 7.13957 8.43891 7.01606 8.0784 7.01606C7.7279 7.01606 7.47588 7.13957 7.32233 7.38659C7.17211 7.63026 7.09701 7.90732 7.09701 8.21776ZM0.968313 2.89021V2.34944C0.968313 1.97558 1.04509 1.63342 1.19864 1.32298C1.35553 1.00921 1.58252 0.758851 1.87961 0.571919C2.18003 0.381649 2.54388 0.286514 2.97115 0.286514C3.4051 0.286514 3.76895 0.381649 4.0627 0.571919C4.35645 0.758851 4.57843 1.00921 4.72865 1.32298C4.87886 1.63342 4.95397 1.97558 4.95397 2.34944V2.89021C4.95397 3.26407 4.87719 3.60789 4.72364 3.92167C4.57343 4.23211 4.34978 4.48247 4.05269 4.67274C3.75894 4.85967 3.39843 4.95313 2.97115 4.95313C2.5372 4.95313 2.17169 4.85967 1.8746 4.67274C1.57751 4.48247 1.35219 4.23211 1.19864 3.92167C1.04509 3.60789 0.968313 3.26407 0.968313 2.89021ZM1.98976 2.34944V2.89021C1.98976 3.20065 2.0632 3.47938 2.21007 3.72639C2.35695 3.97007 2.61064 4.09191 2.97115 4.09191C3.32165 4.09191 3.56867 3.97007 3.7122 3.72639C3.85908 3.47938 3.93252 3.20065 3.93252 2.89021V2.34944C3.93252 2.039 3.86242 1.76194 3.72222 1.51826C3.58202 1.27124 3.33167 1.14774 2.97115 1.14774C2.62066 1.14774 2.36863 1.27124 2.21508 1.51826C2.06487 1.76194 1.98976 2.039 1.98976 2.34944ZM1.34885 10.6813L8.39885 0.426713H9.54047L2.49047 10.6813H1.34885Z" fill="white"/></svg>';
const iconInterpolate      = '<svg width="19" height="11" viewBox="0 0 19 11" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="-0.150566" y1="8.52321" x2="18.8494" y2="2.52321" stroke="white"/><ellipse cx="3.07097" cy="7.5" rx="0.732794" ry="3.23269" transform="rotate(-12.7132 3.07097 7.5)" fill="white"/><ellipse cx="11.3613" cy="4.88962" rx="0.732794" ry="3.23269" transform="rotate(-12.7132 11.3613 4.88962)" fill="white"/><ellipse cx="15.9295" cy="3.65694" rx="0.732794" ry="3.23269" transform="rotate(-12.7132 15.9295 3.65694)" fill="white"/></svg>';

const iconString           = '<svg width="20" height="8" viewBox="0 0 20 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.962017 7H0.0941198L2.60435 0.163636H3.45889L5.96912 7H5.10122L3.05832 1.24517H3.00492L0.962017 7ZM1.28247 4.32955H4.78077V5.06392H1.28247V4.32955ZM7.03396 7V0.163636H9.42402C9.90025 0.163636 10.293 0.245976 10.6024 0.410654C10.9117 0.573106 11.142 0.792306 11.2933 1.06825C11.4447 1.34197 11.5203 1.64574 11.5203 1.97955C11.5203 2.2733 11.468 2.51586 11.3634 2.70724C11.2611 2.89863 11.1253 3.04995 10.9562 3.16122C10.7893 3.27249 10.6079 3.35483 10.4121 3.40824V3.475C10.6213 3.48835 10.8316 3.56179 11.043 3.69531C11.2544 3.82884 11.4313 4.02022 11.5737 4.26946C11.7162 4.5187 11.7874 4.82358 11.7874 5.18409C11.7874 5.5268 11.7095 5.83501 11.5537 6.10874C11.3979 6.38246 11.152 6.59943 10.816 6.75966C10.48 6.91989 10.0427 7 9.50413 7H7.03396ZM7.8618 6.26563H9.50413C10.0449 6.26563 10.4288 6.16103 10.6558 5.95185C10.885 5.74044 10.9996 5.48452 10.9996 5.18409C10.9996 4.95265 10.9406 4.73902 10.8227 4.54318C10.7047 4.34512 10.5367 4.18712 10.3186 4.06918C10.1005 3.94901 9.84239 3.88892 9.54419 3.88892H7.8618V6.26563ZM7.8618 3.1679H9.39732C9.64656 3.1679 9.87132 3.11894 10.0716 3.02102C10.2741 2.92311 10.4343 2.78513 10.5523 2.6071C10.6725 2.42907 10.7325 2.21989 10.7325 1.97955C10.7325 1.67912 10.6279 1.42431 10.4188 1.21513C10.2096 1.00372 9.878 0.898011 9.42402 0.898011H7.8618V3.1679ZM18.6488 2.3H17.8209C17.772 2.06188 17.6863 1.8527 17.5639 1.67244C17.4437 1.49219 17.2969 1.34086 17.1233 1.21847C16.9519 1.09384 16.7616 1.00038 16.5525 0.938068C16.3433 0.875758 16.1252 0.844602 15.8982 0.844602C15.4843 0.844602 15.1093 0.949195 14.7733 1.15838C14.4395 1.36757 14.1735 1.67578 13.9755 2.08303C13.7796 2.49027 13.6817 2.98987 13.6817 3.58182C13.6817 4.17377 13.7796 4.67337 13.9755 5.08061C14.1735 5.48786 14.4395 5.79607 14.7733 6.00526C15.1093 6.21444 15.4843 6.31903 15.8982 6.31903C16.1252 6.31903 16.3433 6.28788 16.5525 6.22557C16.7616 6.16326 16.9519 6.0709 17.1233 5.94851C17.2969 5.82389 17.4437 5.67145 17.5639 5.49119C17.6863 5.30871 17.772 5.09953 17.8209 4.86364H18.6488C18.5865 5.21302 18.473 5.52569 18.3083 5.80163C18.1436 6.07758 17.9389 6.31236 17.6941 6.50597C17.4493 6.69735 17.1745 6.84311 16.8696 6.94325C16.5669 7.04339 16.2431 7.09347 15.8982 7.09347C15.3152 7.09347 14.7966 6.95104 14.3427 6.66619C13.8887 6.38134 13.5315 5.97633 13.2711 5.45114C13.0108 4.92595 12.8806 4.30284 12.8806 3.58182C12.8806 2.8608 13.0108 2.23769 13.2711 1.7125C13.5315 1.18731 13.8887 0.782292 14.3427 0.497443C14.7966 0.212595 15.3152 0.0701705 15.8982 0.0701705C16.2431 0.0701705 16.5669 0.120242 16.8696 0.220384C17.1745 0.320526 17.4493 0.467401 17.6941 0.661009C17.9389 0.852391 18.1436 1.08606 18.3083 1.362C18.473 1.63572 18.5865 1.94839 18.6488 2.3Z" fill="white"/></svg>';
const iconStringJoin       = '<svg width="20" height="7" viewBox="0 0 20 7" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.962017 7H0.0941198L2.60435 0.163636H3.45889L5.96912 7H5.10122L3.05832 1.24517H3.00492L0.962017 7ZM1.28247 4.32955H4.78077V5.06392H1.28247V4.32955ZM8.92999 5.7983V1.39205H9.67771V5.7983H8.92999ZM7.10072 3.96903V3.22131H11.507V3.96903H7.10072ZM13.2303 7V0.163636H15.6203C16.0965 0.163636 16.4893 0.245976 16.7986 0.410654C17.108 0.573106 17.3383 0.792306 17.4896 1.06825C17.641 1.34197 17.7166 1.64574 17.7166 1.97955C17.7166 2.2733 17.6643 2.51586 17.5597 2.70724C17.4574 2.89863 17.3216 3.04995 17.1525 3.16122C16.9856 3.27249 16.8042 3.35483 16.6084 3.40824V3.475C16.8176 3.48835 17.0279 3.56179 17.2393 3.69531C17.4507 3.82884 17.6276 4.02022 17.77 4.26946C17.9124 4.5187 17.9837 4.82358 17.9837 5.18409C17.9837 5.5268 17.9058 5.83501 17.75 6.10874C17.5942 6.38246 17.3483 6.59943 17.0123 6.75966C16.6763 6.91989 16.239 7 15.7004 7H13.2303ZM14.0581 6.26563H15.7004C16.2412 6.26563 16.6251 6.16103 16.8521 5.95185C17.0813 5.74044 17.1959 5.48452 17.1959 5.18409C17.1959 4.95265 17.1369 4.73902 17.019 4.54318C16.901 4.34512 16.733 4.18712 16.5149 4.06918C16.2968 3.94901 16.0387 3.88892 15.7405 3.88892H14.0581V6.26563ZM14.0581 3.1679H15.5936C15.8428 3.1679 16.0676 3.11894 16.2679 3.02102C16.4704 2.92311 16.6306 2.78513 16.7486 2.6071C16.8687 2.42907 16.9288 2.21989 16.9288 1.97955C16.9288 1.67912 16.8242 1.42431 16.6151 1.21513C16.4059 1.00372 16.0743 0.898011 15.6203 0.898011H14.0581V3.1679Z" fill="white"/></svg>';
const iconSubstring        = '<svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.884233 5.99355H0.191761L2.1946 0.539H2.87642L4.87926 5.99355H4.18679L2.55682 1.40193H2.5142L0.884233 5.99355ZM1.13991 3.86286H3.93111V4.4488H1.13991V3.86286ZM19.2367 2.24355H18.5762C18.5372 2.05356 18.4688 1.88666 18.3711 1.74284C18.2753 1.59901 18.1581 1.47828 18.0196 1.38062C17.8829 1.28119 17.731 1.20661 17.5641 1.1569C17.3972 1.10718 17.2232 1.08232 17.0421 1.08232C16.7119 1.08232 16.4127 1.16578 16.1446 1.33268C15.8782 1.49958 15.6661 1.7455 15.508 2.07043C15.3518 2.39536 15.2737 2.79397 15.2737 3.26627C15.2737 3.73857 15.3518 4.13719 15.508 4.46212C15.6661 4.78705 15.8782 5.03296 16.1446 5.19987C16.4127 5.36677 16.7119 5.45022 17.0421 5.45022C17.2232 5.45022 17.3972 5.42536 17.5641 5.37565C17.731 5.32593 17.8829 5.25225 18.0196 5.15459C18.1581 5.05516 18.2753 4.93353 18.3711 4.78971C18.4688 4.64411 18.5372 4.47721 18.5762 4.289H19.2367C19.187 4.56776 19.0965 4.81723 18.9651 5.0374C18.8337 5.25757 18.6703 5.44489 18.475 5.59937C18.2797 5.75207 18.0604 5.86837 17.8172 5.94827C17.5757 6.02817 17.3173 6.06812 17.0421 6.06812C16.5769 6.06812 16.1632 5.95448 15.801 5.72721C15.4388 5.49994 15.1538 5.17678 14.9461 4.75775C14.7383 4.33872 14.6345 3.84156 14.6345 3.26627C14.6345 2.69099 14.7383 2.19383 14.9461 1.7748C15.1538 1.35576 15.4388 1.03261 15.801 0.805335C16.1632 0.578062 16.5769 0.464426 17.0421 0.464426C17.3173 0.464426 17.5757 0.504376 17.8172 0.584277C18.0604 0.664178 18.2797 0.781365 18.475 0.935839C18.6703 1.08854 18.8337 1.27497 18.9651 1.49514C19.0965 1.71354 19.187 1.96301 19.2367 2.24355Z" fill="white"/><path d="M4.21673 10.3V9.69915C4.21673 9.51667 4.249 9.32306 4.31353 9.11832C4.3803 8.91136 4.47599 8.71219 4.60061 8.52081C4.72745 8.3272 4.87989 8.15919 5.05792 8.01676L5.4852 8.36392C5.345 8.5642 5.2226 8.77339 5.11801 8.99148C5.01564 9.20734 4.96446 9.43878 4.96446 9.6858V10.3H4.21673ZM5.92582 10.3V9.69915C5.92582 9.51667 5.95809 9.32306 6.02262 9.11832C6.08939 8.91136 6.18508 8.71219 6.3097 8.52081C6.43655 8.3272 6.58898 8.15919 6.76701 8.01676L7.19429 8.36392C7.05409 8.5642 6.93169 8.77339 6.8271 8.99148C6.72473 9.20734 6.67355 9.43878 6.67355 9.6858V10.3H5.92582ZM8.17067 15V8.16364H10.5607C11.037 8.16364 11.4297 8.24598 11.7391 8.41065C12.0484 8.57311 12.2787 8.79231 12.43 9.06825C12.5814 9.34197 12.657 9.64574 12.657 9.97955C12.657 10.2733 12.6047 10.5159 12.5001 10.7072C12.3978 10.8986 12.262 11.05 12.0929 11.1612C11.926 11.2725 11.7446 11.3548 11.5488 11.4082V11.475C11.758 11.4884 11.9683 11.5618 12.1797 11.6953C12.3911 11.8288 12.568 12.0202 12.7104 12.2695C12.8529 12.5187 12.9241 12.8236 12.9241 13.1841C12.9241 13.5268 12.8462 13.835 12.6904 14.1087C12.5346 14.3825 12.2887 14.5994 11.9527 14.7597C11.6167 14.9199 11.1794 15 10.6408 15H8.17067ZM8.99851 14.2656H10.6408C11.1816 14.2656 11.5655 14.161 11.7925 13.9518C12.0217 13.7404 12.1363 13.4845 12.1363 13.1841C12.1363 12.9527 12.0773 12.739 11.9594 12.5432C11.8414 12.3451 11.6734 12.1871 11.4553 12.0692C11.2372 11.949 10.9791 11.8889 10.6809 11.8889H8.99851V14.2656ZM8.99851 11.1679H10.534C10.7833 11.1679 11.008 11.1189 11.2083 11.021C11.4108 10.9231 11.5711 10.7851 11.689 10.6071C11.8092 10.4291 11.8693 10.2199 11.8693 9.97955C11.8693 9.67912 11.7647 9.42431 11.5555 9.21513C11.3463 9.00372 11.0147 8.89801 10.5607 8.89801H8.99851V11.1679ZM14.8718 8.16364V8.76449C14.8718 8.94697 14.8385 9.14169 14.7717 9.34865C14.7072 9.55339 14.6115 9.75256 14.4846 9.94616C14.36 10.1375 14.2087 10.3045 14.0306 10.4469L13.6034 10.0997C13.7436 9.89943 13.8649 9.69136 13.9672 9.4755C14.0718 9.25741 14.1241 9.02486 14.1241 8.77784V8.16364H14.8718ZM16.5809 8.16364V8.76449C16.5809 8.94697 16.5476 9.14169 16.4808 9.34865C16.4163 9.55339 16.3206 9.75256 16.1937 9.94616C16.0691 10.1375 15.9178 10.3045 15.7397 10.4469L15.3125 10.0997C15.4527 9.89943 15.5739 9.69136 15.6763 9.4755C15.7809 9.25741 15.8332 9.02486 15.8332 8.77784V8.16364H16.5809Z" fill="white"/></svg>';
const iconStringReplace    = '<svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.962017 16H0.0941198L2.60435 9.16364H3.45889L5.96912 16H5.10122L3.05832 10.2452H3.00492L0.962017 16ZM1.28247 13.3295H4.78077V14.0639H1.28247V13.3295ZM18.6763 11.3H17.8485C17.7995 11.0619 17.7138 10.8527 17.5914 10.6724C17.4713 10.4922 17.3244 10.3409 17.1508 10.2185C16.9795 10.0938 16.7892 10.0004 16.58 9.93807C16.3708 9.87576 16.1527 9.8446 15.9257 9.8446C15.5118 9.8446 15.1368 9.9492 14.8008 10.1584C14.467 10.3676 14.2011 10.6758 14.003 11.083C13.8072 11.4903 13.7093 11.9899 13.7093 12.5818C13.7093 13.1738 13.8072 13.6734 14.003 14.0806C14.2011 14.4879 14.467 14.7961 14.8008 15.0053C15.1368 15.2144 15.5118 15.319 15.9257 15.319C16.1527 15.319 16.3708 15.2879 16.58 15.2256C16.7892 15.1633 16.9795 15.0709 17.1508 14.9485C17.3244 14.8239 17.4713 14.6714 17.5914 14.4912C17.7138 14.3087 17.7995 14.0995 17.8485 13.8636H18.6763C18.614 14.213 18.5005 14.5257 18.3358 14.8016C18.1711 15.0776 17.9664 15.3124 17.7216 15.506C17.4768 15.6973 17.202 15.8431 16.8971 15.9433C16.5945 16.0434 16.2707 16.0935 15.9257 16.0935C15.3427 16.0935 14.8242 15.951 14.3702 15.6662C13.9162 15.3813 13.5591 14.9763 13.2987 14.4511C13.0383 13.9259 12.9081 13.3028 12.9081 12.5818C12.9081 11.8608 13.0383 11.2377 13.2987 10.7125C13.5591 10.1873 13.9162 9.78229 14.3702 9.49744C14.8242 9.21259 15.3427 9.07017 15.9257 9.07017C16.2707 9.07017 16.5945 9.12024 16.8971 9.22038C17.202 9.32053 17.4768 9.4674 17.7216 9.66101C17.9664 9.85239 18.1711 10.0861 18.3358 10.362C18.5005 10.6357 18.614 10.9484 18.6763 11.3Z" fill="white"/><path d="M0.275672 6V0.909091H1.99584C2.39357 0.909091 2.72004 0.977036 2.97525 1.11293C3.23045 1.24716 3.41938 1.43194 3.54201 1.66726C3.66464 1.90258 3.72596 2.17022 3.72596 2.47017C3.72596 2.77012 3.66464 3.0361 3.54201 3.26811C3.41938 3.50012 3.23128 3.68241 2.97773 3.81499C2.72418 3.9459 2.4002 4.01136 2.00579 4.01136H0.61374V3.45455H1.9859C2.25768 3.45455 2.47643 3.41477 2.64215 3.33523C2.80953 3.25568 2.9305 3.14299 3.00508 2.99716C3.08131 2.84967 3.11942 2.67401 3.11942 2.47017C3.11942 2.26634 3.08131 2.08819 3.00508 1.93572C2.92884 1.78326 2.80704 1.6656 2.63966 1.58274C2.47229 1.49822 2.25105 1.45597 1.97596 1.45597H0.89215V6H0.275672ZM2.67198 3.71307L3.92482 6H3.20891L1.97596 3.71307H2.67198Z" fill="white"/><path d="M7.93402 18V12.9091H9.71385C10.0685 12.9091 10.361 12.9704 10.5913 13.093C10.8217 13.214 10.9932 13.3772 11.1059 13.5827C11.2186 13.7866 11.2749 14.0128 11.2749 14.2614C11.2749 14.4801 11.236 14.6607 11.1581 14.8033C11.0819 14.9458 10.9808 15.0585 10.8548 15.1413C10.7305 15.2242 10.5955 15.2855 10.4496 15.3253V15.375C10.6054 15.3849 10.762 15.4396 10.9195 15.5391C11.0769 15.6385 11.2086 15.781 11.3147 15.9666C11.4208 16.1522 11.4738 16.3793 11.4738 16.6477C11.4738 16.9029 11.4158 17.1325 11.2998 17.3363C11.1838 17.5401 11.0007 17.7017 10.7504 17.821C10.5002 17.9403 10.1746 18 9.77351 18H7.93402ZM8.5505 17.4531H9.77351C10.1762 17.4531 10.4621 17.3752 10.6311 17.2195C10.8018 17.062 10.8871 16.8714 10.8871 16.6477C10.8871 16.4754 10.8432 16.3163 10.7554 16.1705C10.6676 16.023 10.5425 15.9053 10.38 15.8175C10.2176 15.728 10.0254 15.6832 9.80334 15.6832H8.5505V17.4531ZM8.5505 15.1463H9.69397C9.87957 15.1463 10.047 15.1098 10.1961 15.0369C10.3469 14.964 10.4662 14.8613 10.5541 14.7287C10.6435 14.5961 10.6883 14.4403 10.6883 14.2614C10.6883 14.0376 10.6104 13.8479 10.4546 13.6921C10.2988 13.5347 10.0519 13.456 9.71385 13.456H8.5505V15.1463Z" fill="white"/><path d="M8.72684 10.4314C8.8411 8.38532 8.18851 5.28547 4.9663 4.51052" stroke="white"/><line x1="10.518" y1="9.5204" x2="8.07839" y2="11.6097" stroke="white"/><line x1="6.81449" y1="9.59341" x2="9.27206" y2="11.3618" stroke="white"/><line x1="2.44721" y1="3.77639" x2="3.44721" y2="5.77639" stroke="white"/></svg>';

const iconColor            = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8409 2.43384C10.7465 1.2502 9.18038 0.509092 7.44118 0.509092C4.13249 0.509092 1.45027 3.19131 1.45027 6.5C1.45027 9.80869 4.13249 12.4909 7.44118 12.4909C9.18038 12.4909 10.7465 11.7498 11.8409 10.5662" stroke="white"/><path d="M7.5 7.57511C8.09377 7.57511 8.57511 7.09377 8.57511 6.5C8.57511 5.90623 8.09377 5.42489 7.5 5.42489C6.90623 5.42489 6.42489 5.90623 6.42489 6.5C6.42489 7.09377 6.90623 7.57511 7.5 7.57511Z" fill="white"/></svg>';
const iconColorValidate    = '<svg width="19" height="16" viewBox="-2 0 19 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.179 3.06615L6.68506 9.56013L2.88329 5.75836L4.0255 4.61615L6.68506 7.27571L12.0369 1.92393L13.179 3.06615Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6.06159 1.13348C7.25451 1.03474 8.44629 1.33665 9.44831 1.99145L10.0355 1.09298C8.8335 0.307551 7.40396 -0.054602 5.97305 0.0638407C4.54213 0.182283 3.19159 0.774556 2.13516 1.74692C1.07873 2.71929 0.37676 4.0162 0.140352 5.43241C-0.0960661 6.84862 0.146576 8.30322 0.829882 9.56601C1.51319 10.8288 2.59812 11.8277 3.91297 12.4044C5.22782 12.9812 6.69749 13.1031 8.08937 12.7507C9.03602 12.5109 9.90991 12.0611 10.6496 11.4415L15.2558 15.9919L16.01 15.2284L11.4122 10.6861C11.4756 10.6118 11.5375 10.536 11.5977 10.4586C12.4797 9.32556 12.9585 7.93076 12.9585 6.49496H11.8852C11.8852 7.69195 11.486 8.85476 10.7507 9.79935C10.0155 10.744 8.98629 11.4164 7.82592 11.7102C6.66554 12.0039 5.44031 11.9024 4.34415 11.4216C3.24799 10.9407 2.3435 10.108 1.77385 9.05523C1.20419 8.00247 1.0019 6.7898 1.19899 5.60913C1.39609 4.42848 1.98131 3.34726 2.86203 2.53663C3.74275 1.72599 4.86867 1.23223 6.06159 1.13348Z" fill="white"/></svg>';
const iconColorInterpolate = '<svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="2.5" r="2.5" fill="white" fill-opacity="0.1"/><circle cx="9.5" cy="2.5" r="2" stroke="white" stroke-opacity="0.4"/><circle cx="2.5" cy="9.5" r="2.5" fill="white" fill-opacity="0.4"/><circle cx="2.5" cy="9.5" r="2" stroke="white" stroke-opacity="0.7"/><circle cx="9.5" cy="16.5" r="2.5" fill="white" fill-opacity="0.8"/><circle cx="9.5" cy="16.5" r="2" stroke="white" stroke-opacity="0.9"/><circle cx="14.5" cy="14.5" r="2" fill="white" stroke="white"/><circle cx="14.5" cy="4.5" r="2" stroke="white" stroke-opacity="0.4"/><circle cx="4.5" cy="14.5" r="2.5" fill="white" fill-opacity="0.6"/><circle cx="4.5" cy="14.5" r="2" stroke="white" stroke-opacity="0.8"/><circle cx="4.5" cy="4.5" r="2.5" fill="white" fill-opacity="0.2"/><circle cx="4.5" cy="4.5" r="2" stroke="white" stroke-opacity="0.6"/></svg>';
const iconColorContrast    = '<svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49866 15.5233C12.3783 15.5233 15.5233 12.3783 15.5233 8.49867C15.5233 4.61906 12.3783 1.47401 8.49866 1.47401C4.61906 1.47401 1.47401 4.61906 1.47401 8.49867C1.47401 12.3783 4.61906 15.5233 8.49866 15.5233Z" stroke="white"/><path d="M8.01022 15.1997C6.14349 15.1997 4.3532 14.494 3.03321 13.2377C1.71321 11.9814 0.971649 10.2775 0.971649 8.50083C0.971649 6.72416 1.71321 5.02026 3.03321 3.76397C4.3532 2.50768 6.14349 1.8019 8.01022 1.8019V8.50083V15.1997Z" fill="white"/></svg>';
const iconColorblind       = '<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 18.4807C14.4599 18.4807 18.4807 14.4599 18.4807 9.5C18.4807 4.54009 14.4599 0.519287 9.5 0.519287C4.54009 0.519287 0.519283 4.54009 0.519283 9.5C0.519283 14.4599 4.54009 18.4807 9.5 18.4807Z" stroke="white" stroke-width="0.919355" stroke-dasharray="1.84 1.84"/><path d="M9.5 14.5417C12.2844 14.5417 14.5417 12.2844 14.5417 9.5C14.5417 6.71557 12.2844 4.45834 9.5 4.45834C6.71557 4.45834 4.45834 6.71557 4.45834 9.5C4.45834 12.2844 6.71557 14.5417 9.5 14.5417Z" stroke="white" stroke-width="0.919355"/><path d="M9.5 10.918C10.2831 10.918 10.918 10.2831 10.918 9.5C10.918 8.71686 10.2831 8.08199 9.5 8.08199C8.71686 8.08199 8.08199 8.71686 8.08199 9.5C8.08199 10.2831 8.71686 10.918 9.5 10.918Z" fill="white"/></svg>';
const iconFill             = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 7C13 10.3137 10.3137 13 7 13C3.68629 13 1 10.3137 1 7C1 3.68629 3.68629 1 7 1C10.3137 1 13 3.68629 13 7Z" stroke="white" stroke-opacity="0.5" stroke-width="2"/><path d="M7 12C9.76142 12 12 9.76142 12 7C12 4.23858 9.76142 2 7 2C4.23858 2 2 4.23858 2 7C2 9.76142 4.23858 12 7 12Z" fill="white"/></svg>';
const iconStroke           = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 7C13 10.3137 10.3137 13 7 13C3.68629 13 1 10.3137 1 7C1 3.68629 3.68629 1 7 1C10.3137 1 13 3.68629 13 7Z" stroke="white" stroke-width="2"/><path d="M7 12C9.76142 12 12 9.76142 12 7C12 4.23858 9.76142 2 7 2C4.23858 2 2 4.23858 2 7C2 9.76142 4.23858 12 7 12Z" fill="white" fill-opacity="0.35"/></svg>';

const iconRectangle        = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.5" y="0.5" width="15" height="15" stroke="white"/></svg>';
const iconLine             = '<svg width="17" height="17" viewBox="0 1 17 18" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="0.772299" y1="15.9778" x2="15.6598" y2="1.09027" stroke="white" stroke-width="1.3"/></svg>';
const iconEllipse          = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="7.5" stroke="white"/></svg>';
const iconPolygon          = '<svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.82238 15.4885L10.0496 1.23853L18.2769 15.4885H1.82238Z" stroke="white"/></svg>';
const iconStar             = '<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.8156 2.24924L10.4021 7.13198L10.5144 7.47747H10.8776H16.0116L11.8581 10.4952L11.5642 10.7087L11.6765 11.0542L13.263 15.9369L9.10949 12.9192L8.8156 12.7057L8.5217 12.9192L4.3682 15.9369L5.9547 11.0542L6.06695 10.7087L5.77306 10.4952L1.61955 7.47747H6.75357H7.11684L7.2291 7.13198L8.8156 2.24924Z" stroke="white"/></svg>';

const iconComment          = '<svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.92701 11.5375L3.6897 11.045C3.24801 10.1283 3 9.09994 3 8.01086C3 4.14487 6.13401 1.01086 10 1.01086C13.866 1.01086 17 4.14487 17 8.01086C17 11.8769 13.866 15.0109 10 15.0109C8.89526 15.0109 7.85296 14.7557 6.92628 14.302L6.65842 14.1708L6.36249 14.2078L1.94388 14.7601L3.64047 12.0032L3.92701 11.5375ZM0.671856 14.9191L0 16.0109L1.27203 15.8519L6.48652 15.2001C7.5471 15.7194 8.73951 16.0109 10 16.0109C14.4183 16.0109 18 12.4292 18 8.01086C18 3.59258 14.4183 0.0108643 10 0.0108643C5.58172 0.0108643 2 3.59258 2 8.01086C2 9.25344 2.28329 10.4299 2.78881 11.4791L0.671856 14.9191Z" fill="white"/></svg>';



var menuItemShowNodeId;
var menuItemShowWires;

var menuItemLogMessages;
var menuItemLogActions;
var menuItemLogRawLoading;
var menuItemLogRawSaving;
var menuItemLogLoading;
var menuItemLogRawRequests;
var menuItemLogRawValues;
var menuItemLogRequests;
var menuItemLogValueUpdates
var menuItemLogObjectUpdates;



function initMenuBar()
{
    // menuMainPreferences = new Menu('Preferences', false);
    // menuMainPreferences.addItems([ 
    //     new MenuItem('Debug')]);


    menuMainDebugLogging = new Menu('Logging', false);
    menuMainDebugLogging.addItems([
        menuItemLogMessages      = new MenuItem('Messages',       {checkCallback: () => settings.logMessages     , callback: () => updateSettingAndMenu('logMessages',      true, !settings.logMessages     )}),
        menuItemLogActions       = new MenuItem('Actions',        {checkCallback: () => settings.logActions      , callback: () => updateSettingAndMenu('logActions',       true, !settings.logActions      )}),
                                   new MenuItem('',               {isSeparator: true}),
        menuItemLogRawLoading    = new MenuItem('Raw loading',    {checkCallback: () => settings.logRawLoading   , callback: () => updateSettingAndMenu('logRawLoading',    true, !settings.logRawLoading   )}),
        menuItemLogRawSaving     = new MenuItem('Raw saving',     {checkCallback: () => settings.logRawSaving    , callback: () => updateSettingAndMenu('logRawSaving',     true, !settings.logRawSaving    )}),
                                   new MenuItem('',               {isSeparator: true}),
        menuItemLogLoading       = new MenuItem('Loading',        {checkCallback: () => settings.logLoading      , callback: () => updateSettingAndMenu('logLoading',       true, !settings.logLoading      )}),
                                   new MenuItem('',               {isSeparator: true}),
        menuItemLogRawRequests   = new MenuItem('Raw requests',   {checkCallback: () => settings.logRawRequests  , callback: () => updateSettingAndMenu('logRawRequests',   true, !settings.logRawRequests  )}),
        menuItemLogRawValues     = new MenuItem('Raw values',     {checkCallback: () => settings.logRawValues    , callback: () => updateSettingAndMenu('logRawValues',     true, !settings.logRawValues    )}),
                                   new MenuItem('',               {isSeparator: true}),
        menuItemLogRequests      = new MenuItem('Requests',       {checkCallback: () => settings.logRequests     , callback: () => updateSettingAndMenu('logRequests',      true, !settings.logRequests     )}),
        menuItemLogValueUpdates  = new MenuItem('Value updates',  {checkCallback: () => settings.logValueUpdates , callback: () => updateSettingAndMenu('logValueUpdates',  true, !settings.logValueUpdates )}),
        menuItemLogObjectUpdates = new MenuItem('Object updates', {checkCallback: () => settings.logObjectUpdates, callback: () => updateSettingAndMenu('logObjectUpdates', true, !settings.logObjectUpdates)})]);


    menuMainDebug = new Menu('Debug', false);
    menuMainDebug.addItems([
        menuItemShowNodeId = new MenuItem('Show node IDs',
        {
            checkCallback: () => settings.showNodeId, 
            callback: () => 
            {
                updateSettingAndMenu('showNodeId', true, !settings.showNodeId);
                graph.nodes.forEach(n => n.updateNode());
            }
        }),
        menuItemShowWires = new MenuItem('Show wires',
        {
            checkCallback: () => settings.showWires, 
            callback: () => 
            {
                updateSettingAndMenu('showWires', true, !settings.showWires);
                graphView.updateShowWires(settings.showWires);  
            }
        }),
        new MenuItem('',        {isSeparator: true}),
        new MenuItem('Logging', {childMenu: menuMainDebugLogging})]);


    menuMainHelp = new Menu('Help and activation', false);
    menuMainHelp.addItems([
        new MenuItem('Help page',         {callback: () => window.open('http://www.bourt.com/generator/help', '_blank')}),
        new MenuItem('',                  {isSeparator: true}),
        new MenuItem('Enter product key', {callback: () => showProductKeyDialog()})]);


    menuMain = new Menu('Main menu', false);
    menuMain.addItems([
                       new MenuItem('File'),
                       //new MenuItem('Preferences', {childMenu: menuMainPreferences}),
                       new MenuItem('Debug',               {childMenu: menuMainDebug}),
                       new MenuItem('',                    {isSeparator: true}),
        menuMainHelp = new MenuItem('Help and activation', {childMenu: menuMainHelp })]);
  
        
    menuNumber = new Menu('Number nodes');
    menuNumber.addItems([
        new MenuItem('Number',      {icon: iconNumber,    callback: () => actionManager.do(new CreateNodeAction(NUMBER, btnNumber.div))}),
        new MenuItem('Limits',      {icon: iconLimits     }),
        new MenuItem('Math',        {icon: iconMath       }),
        new MenuItem('Add',         {icon: iconAdd        }),
        new MenuItem('Subtract',    {icon: iconSubtract   }),
        new MenuItem('Multiply',    {icon: iconMultiply   }),
        new MenuItem('Divide',      {icon: iconDivide     }),
        new MenuItem('Exponent',    {icon: iconExponent   }),
        new MenuItem('Modulo',      {icon: iconModulo     }),
        new MenuItem('Interpolate', {icon: iconInterpolate})]);
    
    
    menuString = new Menu('String nodes');
    menuString.addItems([
        new MenuItem('String',      {icon: iconString       }),
        new MenuItem('Join',        {icon: iconStringJoin   }),
        new MenuItem('Substring',   {icon: iconSubstring    }),
        new MenuItem('Replace',     {icon: iconStringReplace})]);
    
    
    menuColor = new Menu('Color nodes');
    menuColor.addItems([
        new MenuItem('Color',       {icon: iconColor,          callback: () => actionManager.do(new CreateNodeAction(COLOR, btnColor.div))}),
        new MenuItem('Interpolate', {icon: iconColorInterpolate}),
        new MenuItem('Validate',    {icon: iconColorValidate   }),
        new MenuItem('Contrast',    {icon: iconColorContrast   }),
        new MenuItem('Colorblind',  {icon: iconColorblind      }),
        new MenuItem('',            {isSeparator: true}),
        new MenuItem('Fill',        {icon: iconFill,           callback: () => actionManager.do(new CreateNodeAction(FILL,   btnColor.div))}),
        new MenuItem('Stroke',      {icon: iconStroke,         callback: () => actionManager.do(new CreateNodeAction(STROKE, btnColor.div))})]);
    
    
    menuShape = new Menu('Shape nodes');
    menuShape.addItems([
        new MenuItem('Rectangle',   {icon: iconRectangle, callback: () => actionManager.do(new CreateNodeAction(RECTANGLE, btnShape.div))}),
        new MenuItem('Line',        {icon: iconLine   }),
        new MenuItem('Ellipse',     {icon: iconEllipse}),
        new MenuItem('Polygon',     {icon: iconPolygon}),
        new MenuItem('Star',        {icon: iconStar   })]);


    menuZoom = new Menu('Zoom/view options', false);
    menuZoom.addItems([
        new MenuItem('Zoom in',      {callback: () => graphView.zoom *= Math.pow(2, 1/2)}),
        new MenuItem('Zoom out',     {callback: () => graphView.zoom /= Math.pow(2, 1/2)}),
        new MenuItem('Zoom to fit',  {}),
        new MenuItem('Zoom to 100%', {callback: () => graphView.zoom = 1})]);


    const btnMain    = new MenuButton('', menuMain, {useMenuName: true});
    const btnNumber  = new MenuButton('', menuNumber);
    const btnString  = new MenuButton('', menuString);
    const btnColor   = new MenuButton('', menuColor);
    const btnShape   = new MenuButton('', menuShape);
    const btnComment = new MenuButton('Add comment', null, 
    {
        callback: () => actionManager.do(new CreateNodeAction(COMMENT, btnComment.div))
    });


    const btnZoom = new MenuButton('', menuZoom, {selectLast: false});

    btnZoom.div.style.width        = '64px';
    btnZoom.div.style.position     = 'absolute';
    btnZoom.div.style.right        = '0px';
    btnZoom.div.style.paddingRight = '0px';


    btnMain   .setIcon(iconGenerator);
    btnComment.setIcon(iconComment);
}