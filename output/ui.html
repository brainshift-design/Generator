<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">

<style>


body
{
    margin: 0;
}

#container
{
    display: table-column;
}




</style>

<div id='container'>

    <h1>Generator</h1>

</div>





<script>

////////////////////////////////////////////////////





function loadState(state)
{
    resizeWindow(
        window.innerWidth, 
        state.windowHeight);
}    


function save(key, value)
{
    parent.postMessage({ pluginMessage:
    { 
        cmd:   'save', 
        key:   key,
        value: value
    }}, '*');
}


function saveState()
{
    save('state',
    {
        //windowHeight: window.innerHeight
    });
}


document.canResize = false;
document.resizing  = false;

document.startY    = 0;
document.startH    = 0;


document.addEventListener('pointerdown', function(e)
{
    if (document.canResize)
    {
        document.resizing = true;
        document.startY   = e.clientY;
        document.startH   = window.innerHeight;

        document.body.setPointerCapture(e.pointerId);
    }
});


document.addEventListener('pointermove', function(e)
{
    if (document.resizing)
        resizeWindow(document.startH + e.clientY - document.startY);
    else
    {
        document.canResize = document.body.clientHeight - e.clientY <= 8;
        document.body.style.cursor = document.canResize ? 'ns-resize' : 'default';
    }
});


document.addEventListener('pointerup', function(e)
{
    if (document.resizing)
    {
        document.resizing  = false;
        document.canResize = document.body.clientHeight - e.clientY <= 8;
        document.body.releasePointerCapture(e.pointerId);
    }
});


function resizeWindow( height)
{
    parent.postMessage({ pluginMessage: 
    { 
        cmd:    'resizeWindow', 
        height: height
    }}, '*');

}


//save('state', null);
//save('windowHeight', null);


parent.postMessage({ pluginMessage: 
{ 
    cmd:    'loadState',
    onLoad: 'loadState'
}}, '*');


onmessage = (e) =>
{
    var msg = e.data.pluginMessage;
}





////////////////////////////////////////////////////

</script>
